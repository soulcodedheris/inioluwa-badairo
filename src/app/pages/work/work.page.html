<section class="mx-auto min-h-dvh w-full max-w-6xl px-6 py-16" appAppear>
  <app-breadcrumbs />
  <header class="mb-10">
    <h1 class="text-3xl font-semibold sm:text-5xl">Selected Work</h1>
    <p class="mt-3 max-w-2xl text-gray-600">Four to six projects, each with a clear problem, role, constraints, and measurable result.</p>
  </header>

  <div class="mb-6 flex items-center gap-3">
    <label for="work-search" class="sr-only">Search work</label>
    <input id="work-search" type="search" class="w-full rounded border px-3 py-2 dark:bg-zinc-800" placeholder="Search work" [(ngModel)]="qValue" (ngModelChange)="q.set(qValue)" aria-label="Search work">
  </div>
  <div class="mb-6 flex flex-wrap gap-2" role="group" aria-label="Filter by tag">
    @for (t of allTags(); track t) {
      <button type="button" class="rounded-full border px-3 py-1 text-xs" [class.bg-blue-600]="selected().has(t)" [class.text-white]="selected().has(t)" (click)="toggle(t)" [attr.aria-pressed]="selected().has(t)" [attr.aria-label]="'Filter by tag '+t">{{ t }}</button>
    }
    @if (selected().size) {
      <button type="button" class="rounded-full border px-3 py-1 text-xs" (click)="clear()" aria-label="Clear selected tags">Clear</button>
    }
  </div>

  <ul class="grid grid-cols-1 gap-6 sm:grid-cols-2">
    @for (w of filtered(); track w.slug) {
      <li class="rounded-xl border border-gray-200 p-5 transition hover:translate-y-0.5 hover:bg-gray-50 dark:border-gray-700 dark:hover:bg-gray-900/40 motion-reduce:hover:translate-y-0">
        <a [routerLink]="['/work', w.slug]" class="block no-underline">
          @if (w.thumbnailUrl) {
            <img ngSrc="{{ w.thumbnailUrl }}" alt="{{ w.title }}" class="mb-3 h-36 w-full rounded-lg object-cover" width="640" height="360" />
          }
          <h3 class="text-lg font-medium">{{ w.title }}</h3>
          <p class="mt-2 line-clamp-2 text-sm text-gray-600 dark:text-gray-300">{{ w.blurb }}</p>
          <div class="mt-3 flex flex-wrap gap-2">
            @for (t of w.tags; track t) {
            <span class="rounded-full border border-gray-300 px-2 py-0.5 text-xs text-gray-600 dark:border-gray-600 dark:text-gray-300">{{ t }}</span>
            }
            @if (w.resultPct) {
              <span class="rounded-full bg-green-100 px-2 py-0.5 text-xs text-green-700 dark:bg-green-900/30 dark:text-green-300">Result: +{{ w.resultPct }}%</span>
            }
            @if (w.role) {
              <span class="rounded-full bg-blue-100 px-2 py-0.5 text-xs text-blue-700 dark:bg-blue-900/30 dark:text-blue-300">Role: {{ w.role }}</span>
            }
          </div>
        </a>
      </li>
    }
  </ul>
</section>


